const boardElement = document.getElementById('chess-board');
let selectedSquare = null;

// 初始棋子佈局
const initialSetup = [
    'r', 'n', 'b', 'q', 'k', 'b', 'n', 'r', // 黑方
    'p', 'p', 'p', 'p', 'p', 'p', 'p', 'p',
    '', '', '', '', '', '', '', '',
    '', '', '', '', '', '', '', '',
    '', '', '', '', '', '', '', '',
    '', '', '', '', '', '', '', '',
    'P', 'P', 'P', 'P', 'P', 'P', 'P', 'P', // 白方
    'R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R',
];

function createBoard() {
    initialSetup.forEach((piece, index) => {
        const square = document.createElement('div');
        square.classList.add('square', (Math.floor(index / 8) + index) % 2 === 0 ? 'light' : 'dark');
        square.dataset.index = index;
        square.textContent = piece;
        square.addEventListener('click', () => handleSquareClick(square));
        boardElement.appendChild(square);
    });
}

function handleSquareClick(square) {
    if (selectedSquare) {
        if (selectedSquare !== square) {
            // 移動棋子
            square.textContent = selectedSquare.textContent;
            selectedSquare.textContent = '';
            selectedSquare = null;
        }
    } else {
        selectedSquare = square;
    }
}

document.addEventListener('DOMContentLoaded', createBoard);
